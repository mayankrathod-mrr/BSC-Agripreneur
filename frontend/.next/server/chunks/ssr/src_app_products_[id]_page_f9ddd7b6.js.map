{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/app/products/%5Bid%5D/page.js"],"sourcesContent":["// frontend/src/app/products/[id]/page.js\n\"use client\";\n\nimport { useState, useEffect, use } from 'react';\nimport Image from 'next/image';\nimport { useAuth } from '@/context/AuthContext';\n\nexport default function ProductDetailPage({ params }) {\n  const { id } = use(params);\n  const { user } = useAuth();\n  \n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!id) {\n        setLoading(false);\n        return;\n    }\n\n    const getProductDetails = async () => {\n      setLoading(true);\n      try {\n        const res = await fetch(`http://localhost:5000/api/products/${id}`);\n        if (!res.ok) {\n          throw new Error('Failed to fetch product');\n        }\n        const data = await res.json();\n        setProduct(data);\n      } catch (error) {\n        console.error(\"Error in Product Detail Page:\", error);\n        setProduct(null); // Set product to null on error\n      } finally {\n        setLoading(false); // This ensures loading is always stopped\n      }\n    };\n    \n    getProductDetails();\n  }, [id]);\n\n  const handleAddToCart = async () => {\n    // ... (This function remains the same)\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-12\">Loading product details...</div>;\n  }\n\n  if (!product) {\n    return <div className=\"text-center py-12\">Product not found or there was an error loading it.</div>;\n  }\n\n  // The rest of the JSX is the same\n  return (\n    <div className=\"container mx-auto py-12 px-4\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n        <div>\n          <h2 className=\"text-2xl font-bold mb-4 text-center\">Product Showcase</h2>\n          <div className=\"flex flex-col sm:flex-row gap-4\">\n            <div className=\"flex-1 text-center\">\n              <h3 className=\"text-lg font-semibold mb-2\">Before</h3>\n              <div className=\"relative w-full h-64 border rounded-lg overflow-hidden\">\n                <Image src={product.beforeImage} alt=\"Before usage\" fill className=\"object-cover\" sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"/>\n              </div>\n            </div>\n            <div className=\"flex-1 text-center\">\n              <h3 className=\"text-lg font-semibold mb-2\">After</h3>\n              <div className=\"relative w-full h-64 border rounded-lg overflow-hidden\">\n                <Image src={product.afterImage} alt=\"After usage\" fill className=\"object-cover\" sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"/>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"space-y-4\">\n          <h1 className=\"text-4xl font-bold\">{product.name}</h1>\n          <span className=\"text-sm bg-green-200 text-green-800 px-2 py-1 rounded capitalize\">{product.category}</span>\n          <p className=\"text-gray-600\">{product.description}</p>\n          <p className=\"text-3xl font-bold text-green-700\">â‚¹{product.price}</p>\n          <p className=\"text-md\"><span className=\"font-semibold\">Stock:</span> {product.quantity > 0 ? `${product.quantity} units available` : 'Out of Stock'}</p>\n          <button onClick={handleAddToCart} className=\"w-full bg-green-700 text-white font-bold py-3 px-4 rounded hover:bg-green-800 transition-colors duration-300 disabled:bg-gray-400\" disabled={product.quantity === 0}>\n            {product.quantity > 0 ? 'Add to Cart' : 'Out of Stock'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"AAAA,yCAAyC;;;;;;AAGzC;AACA;AACA;AAJA;;;;;AAMe,SAAS,kBAAkB,EAAE,MAAM,EAAE;IAClD,MAAM,EAAE,EAAE,EAAE,GAAG,IAAA,4MAAG,EAAC;IACnB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,wIAAO;IAExB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,IAAI;YACL,WAAW;YACX;QACJ;QAEA,MAAM,oBAAoB;YACxB,WAAW;YACX,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,CAAC,mCAAmC,EAAE,IAAI;gBAClE,IAAI,CAAC,IAAI,EAAE,EAAE;oBACX,MAAM,IAAI,MAAM;gBAClB;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,WAAW;YACb,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iCAAiC;gBAC/C,WAAW,OAAO,+BAA+B;YACnD,SAAU;gBACR,WAAW,QAAQ,yCAAyC;YAC9D;QACF;QAEA;IACF,GAAG;QAAC;KAAG;IAEP,MAAM,kBAAkB;IACtB,uCAAuC;IACzC;IAEA,IAAI,SAAS;QACX,qBAAO,8OAAC;YAAI,WAAU;sBAAoB;;;;;;IAC5C;IAEA,IAAI,CAAC,SAAS;QACZ,qBAAO,8OAAC;YAAI,WAAU;sBAAoB;;;;;;IAC5C;IAEA,kCAAkC;IAClC,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;;sCACC,8OAAC;4BAAG,WAAU;sCAAsC;;;;;;sCACpD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAG,WAAU;sDAA6B;;;;;;sDAC3C,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,wIAAK;gDAAC,KAAK,QAAQ,WAAW;gDAAE,KAAI;gDAAe,IAAI;gDAAC,WAAU;gDAAe,OAAM;;;;;;;;;;;;;;;;;8CAG5F,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAG,WAAU;sDAA6B;;;;;;sDAC3C,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,wIAAK;gDAAC,KAAK,QAAQ,UAAU;gDAAE,KAAI;gDAAc,IAAI;gDAAC,WAAU;gDAAe,OAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAK9F,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAsB,QAAQ,IAAI;;;;;;sCAChD,8OAAC;4BAAK,WAAU;sCAAoE,QAAQ,QAAQ;;;;;;sCACpG,8OAAC;4BAAE,WAAU;sCAAiB,QAAQ,WAAW;;;;;;sCACjD,8OAAC;4BAAE,WAAU;;gCAAoC;gCAAE,QAAQ,KAAK;;;;;;;sCAChE,8OAAC;4BAAE,WAAU;;8CAAU,8OAAC;oCAAK,WAAU;8CAAgB;;;;;;gCAAa;gCAAE,QAAQ,QAAQ,GAAG,IAAI,GAAG,QAAQ,QAAQ,CAAC,gBAAgB,CAAC,GAAG;;;;;;;sCACrI,8OAAC;4BAAO,SAAS;4BAAiB,WAAU;4BAAoI,UAAU,QAAQ,QAAQ,KAAK;sCAC5M,QAAQ,QAAQ,GAAG,IAAI,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;AAMpD","debugId":null}}]
}