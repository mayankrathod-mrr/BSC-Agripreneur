{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/app/products/%5Bid%5D/page.js"],"sourcesContent":["// frontend/src/app/products/[id]/page.js\n\"use client\";\n\nimport { useState, useEffect, use } from 'react'; // <-- 1. IMPORT 'use' FROM REACT\nimport Image from 'next/image';\nimport { useAuth } from '@/context/AuthContext';\n\nexport default function ProductDetailPage({ params }) {\n  const { id } = use(params); // <-- 2. WRAP 'params' WITH use()\n  const { user } = useAuth();\n  \n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const getProductDetails = async () => {\n      try {\n        setLoading(true);\n        const res = await fetch(`http://localhost:5000/api/products/${id}`);\n        if (!res.ok) throw new Error('Failed to fetch product');\n        const data = await res.json();\n        setProduct(data);\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (id) {\n      getProductDetails();\n    }\n  }, [id]);\n\n  const handleAddToCart = async () => {\n    if (!user) {\n      alert('Please log in to add items to your cart.');\n      return;\n    }\n    try {\n      const res = await fetch(`http://localhost:5000/api/cart/add`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${user.token}`,\n        },\n        body: JSON.stringify({\n          productId: product._id,\n          quantity: 1,\n        }),\n      });\n      if (!res.ok) throw new Error('Failed to add to cart');\n      const data = await res.json();\n      console.log('Updated Cart:', data);\n      alert('Product added to cart successfully!');\n    } catch (error) {\n      console.error(error);\n      alert('Error adding product to cart.');\n    }\n  };\n\n  if (loading) {\n    return <div className=\"text-center py-12\">Loading product details...</div>;\n  }\n  if (!product) {\n    return <div className=\"text-center py-12\">Product not found.</div>;\n  }\n\n  // The rest of the JSX stays exactly the same\n  return (\n    <div className=\"container mx-auto py-12 px-4\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n        <div>\n          <h2 className=\"text-2xl font-bold mb-4 text-center\">Product Showcase</h2>\n          <div className=\"flex flex-col sm:flex-row gap-4\">\n            <div className=\"flex-1 text-center\">\n              <h3 className=\"text-lg font-semibold mb-2\">Before</h3>\n              <div className=\"relative w-full h-64 border rounded-lg overflow-hidden\">\n                <Image src=\"/placeholder.png\" alt=\"Before usage\" fill className=\"object-cover\" sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"/>\n              </div>\n            </div>\n            <div className=\"flex-1 text-center\">\n              <h3 className=\"text-lg font-semibold mb-2\">After</h3>\n              <div className=\"relative w-full h-64 border rounded-lg overflow-hidden\">\n                <Image src=\"/placeholder.png\" alt=\"After usage\" fill className=\"object-cover\" sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"/>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"space-y-4\">\n          <h1 className=\"text-4xl font-bold\">{product.name}</h1>\n          <span className=\"text-sm bg-green-200 text-green-800 px-2 py-1 rounded capitalize\">{product.category}</span>\n          <p className=\"text-gray-600\">{product.description}</p>\n          <p className=\"text-3xl font-bold text-green-700\">â‚¹{product.price}</p>\n          <p className=\"text-md\"><span className=\"font-semibold\">Stock:</span> {product.quantity > 0 ? `${product.quantity} units available` : 'Out of Stock'}</p>\n          <button onClick={handleAddToCart} className=\"w-full bg-green-700 text-white font-bold py-3 px-4 rounded hover:bg-green-800 transition-colors duration-300 disabled:bg-gray-400\" disabled={product.quantity === 0}>\n            {product.quantity > 0 ? 'Add to Cart' : 'Out of Stock'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"AAAA,yCAAyC;;;;;;AAGzC,oVAAkD,iCAAiC;AACnF;AACA;AAJA;;;;;AAMe,SAAS,kBAAkB,EAAE,MAAM,EAAE;IAClD,MAAM,EAAE,EAAE,EAAE,GAAG,IAAA,4MAAG,EAAC,SAAS,kCAAkC;IAC9D,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,wIAAO;IAExB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,oBAAoB;YACxB,IAAI;gBACF,WAAW;gBACX,MAAM,MAAM,MAAM,MAAM,CAAC,mCAAmC,EAAE,IAAI;gBAClE,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;gBAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,WAAW;YACb,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC;YAChB,SAAU;gBACR,WAAW;YACb;QACF;QACA,IAAI,IAAI;YACN;QACF;IACF,GAAG;QAAC;KAAG;IAEP,MAAM,kBAAkB;QACtB,IAAI,CAAC,MAAM;YACT,MAAM;YACN;QACF;QACA,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,kCAAkC,CAAC,EAAE;gBAC5D,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,iBAAiB,CAAC,OAAO,EAAE,KAAK,KAAK,EAAE;gBACzC;gBACA,MAAM,KAAK,SAAS,CAAC;oBACnB,WAAW,QAAQ,GAAG;oBACtB,UAAU;gBACZ;YACF;YACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,QAAQ,GAAG,CAAC,iBAAiB;YAC7B,MAAM;QACR,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,MAAM;QACR;IACF;IAEA,IAAI,SAAS;QACX,qBAAO,8OAAC;YAAI,WAAU;sBAAoB;;;;;;IAC5C;IACA,IAAI,CAAC,SAAS;QACZ,qBAAO,8OAAC;YAAI,WAAU;sBAAoB;;;;;;IAC5C;IAEA,6CAA6C;IAC7C,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;;sCACC,8OAAC;4BAAG,WAAU;sCAAsC;;;;;;sCACpD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAG,WAAU;sDAA6B;;;;;;sDAC3C,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,wIAAK;gDAAC,KAAI;gDAAmB,KAAI;gDAAe,IAAI;gDAAC,WAAU;gDAAe,OAAM;;;;;;;;;;;;;;;;;8CAGzF,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAG,WAAU;sDAA6B;;;;;;sDAC3C,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,wIAAK;gDAAC,KAAI;gDAAmB,KAAI;gDAAc,IAAI;gDAAC,WAAU;gDAAe,OAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAK5F,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAsB,QAAQ,IAAI;;;;;;sCAChD,8OAAC;4BAAK,WAAU;sCAAoE,QAAQ,QAAQ;;;;;;sCACpG,8OAAC;4BAAE,WAAU;sCAAiB,QAAQ,WAAW;;;;;;sCACjD,8OAAC;4BAAE,WAAU;;gCAAoC;gCAAE,QAAQ,KAAK;;;;;;;sCAChE,8OAAC;4BAAE,WAAU;;8CAAU,8OAAC;oCAAK,WAAU;8CAAgB;;;;;;gCAAa;gCAAE,QAAQ,QAAQ,GAAG,IAAI,GAAG,QAAQ,QAAQ,CAAC,gBAAgB,CAAC,GAAG;;;;;;;sCACrI,8OAAC;4BAAO,SAAS;4BAAiB,WAAU;4BAAoI,UAAU,QAAQ,QAAQ,KAAK;sCAC5M,QAAQ,QAAQ,GAAG,IAAI,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;AAMpD","debugId":null}}]
}