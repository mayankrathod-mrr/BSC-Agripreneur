{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/components/ProductActions.js"],"sourcesContent":["// frontend/src/components/ProductActions.js\n\"use client\";\n\nimport { useState } from \"react\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport { FaShoppingCart } from \"react-icons/fa\";\nimport { ImSpinner2 } from \"react-icons/im\";\n\nexport default function ProductActions({ product }) {\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(false);\n\n  const handleAddToCart = async () => {\n    if (!user) {\n      alert(\"Please log in to add items to your cart.\");\n      return;\n    }\n    try {\n      setLoading(true);\n      const res = await fetch(`http://localhost:5000/api/cart/add`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${user.token}`,\n        },\n        body: JSON.stringify({ productId: product._id, quantity: 1 }),\n      });\n      if (!res.ok) throw new Error(\"Failed to add to cart\");\n      alert(\"✅ Product added to cart successfully!\");\n    } catch (error) {\n      console.error(error);\n      alert(\"❌ Error adding product to cart.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <button\n      onClick={handleAddToCart}\n      disabled={product.quantity === 0 || loading}\n      className={`w-full flex items-center justify-center gap-2 font-semibold py-3 px-5 rounded-xl \n        transition-all duration-300 shadow-md\n        ${\n          product.quantity > 0 && !loading\n            ? \"bg-gradient-to-r from-green-600 to-emerald-500 text-white hover:from-green-700 hover:to-emerald-600 active:scale-95\"\n            : \"bg-gray-200 cursor-not-allowed text-gray-500\"\n        }`}\n    >\n      {loading ? (\n        <>\n          <ImSpinner2 className=\"animate-spin\" size={20} />\n          <span>Adding...</span>\n        </>\n      ) : product.quantity > 0 ? (\n        <>\n          <FaShoppingCart size={18} />\n          <span>Add to Cart</span>\n        </>\n      ) : (\n        \"Out of Stock\"\n      )}\n    </button>\n  );\n}\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;;AAG5C;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS,eAAe,EAAE,OAAO,EAAE;IAChD,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,wIAAO;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,kBAAkB;QACtB,IAAI,CAAC,MAAM;YACT,MAAM;YACN;QACF;QACA,IAAI;YACF,WAAW;YACX,MAAM,MAAM,MAAM,MAAM,CAAC,kCAAkC,CAAC,EAAE;gBAC5D,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,eAAe,CAAC,OAAO,EAAE,KAAK,KAAK,EAAE;gBACvC;gBACA,MAAM,KAAK,SAAS,CAAC;oBAAE,WAAW,QAAQ,GAAG;oBAAE,UAAU;gBAAE;YAC7D;YACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAC7B,MAAM;QACR,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QACC,SAAS;QACT,UAAU,QAAQ,QAAQ,KAAK,KAAK;QACpC,WAAW,CAAC;;QAEV,EACE,QAAQ,QAAQ,GAAG,KAAK,CAAC,UACrB,wHACA,gDACJ;kBAEH,wBACC;;8BACE,8OAAC,4JAAU;oBAAC,WAAU;oBAAe,MAAM;;;;;;8BAC3C,8OAAC;8BAAK;;;;;;;2BAEN,QAAQ,QAAQ,GAAG,kBACrB;;8BACE,8OAAC,gKAAc;oBAAC,MAAM;;;;;;8BACtB,8OAAC;8BAAK;;;;;;;2BAGR;;;;;;AAIR","debugId":null}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/components/StarRating.js"],"sourcesContent":["\"use client\";\n\n// This is our own custom Star component. It uses SVG and Tailwind CSS.\nconst Star = ({ filled }) => (\n    <svg\n        className={`w-5 h-5 ${filled ? 'text-amber-500' : 'text-gray-300'}`}\n        fill=\"currentColor\"\n        viewBox=\"0 0 20 20\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n    >\n        <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n    </svg>\n);\n\nexport default function StarRating({ rating = 0, numReviews = 0 }) {\n    return (\n        <div className=\"flex items-center space-x-2\">\n            <div className=\"flex items-center\">\n                {[...Array(5)].map((_, index) => {\n                    const starValue = index + 1;\n                    // Fills the star if the rating is higher than its value\n                    const filled = rating >= starValue;\n                    return <Star key={index} filled={filled} />;\n                })}\n            </div>\n            {numReviews > 0 && (\n                 <span className=\"text-gray-600 text-sm\">\n                    ({numReviews} {numReviews === 1 ? 'review' : 'reviews'})\n                </span>\n            )}\n        </div>\n    );\n}\n\n"],"names":[],"mappings":";;;;;AAAA;;AAEA,uEAAuE;AACvE,MAAM,OAAO,CAAC,EAAE,MAAM,EAAE,iBACpB,8OAAC;QACG,WAAW,CAAC,QAAQ,EAAE,SAAS,mBAAmB,iBAAiB;QACnE,MAAK;QACL,SAAQ;QACR,OAAM;kBAEN,cAAA,8OAAC;YAAK,GAAE;;;;;;;;;;;AAID,SAAS,WAAW,EAAE,SAAS,CAAC,EAAE,aAAa,CAAC,EAAE;IAC7D,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACV;uBAAI,MAAM;iBAAG,CAAC,GAAG,CAAC,CAAC,GAAG;oBACnB,MAAM,YAAY,QAAQ;oBAC1B,wDAAwD;oBACxD,MAAM,SAAS,UAAU;oBACzB,qBAAO,8OAAC;wBAAiB,QAAQ;uBAAf;;;;;gBACtB;;;;;;YAEH,aAAa,mBACT,8OAAC;gBAAK,WAAU;;oBAAwB;oBACnC;oBAAW;oBAAE,eAAe,IAAI,WAAW;oBAAU;;;;;;;;;;;;;AAK3E","debugId":null}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/components/ProductReviews.js"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\n// We use our OWN component to DISPLAY stars horizontally\nimport StarRating from './StarRating'; \n\n// A simple star icon for our new rating input\nconst StarIcon = ({ filled, onClick }) => (\n    <button type=\"button\" onClick={onClick} className=\"focus:outline-none p-0.5\">\n        <svg\n            className={`w-7 h-7 ${filled ? 'text-amber-500' : 'text-gray-300'} hover:text-amber-400 transition-colors`}\n            fill=\"currentColor\"\n            viewBox=\"0 0 20 20\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n        >\n            <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n        </svg>\n    </button>\n);\n\nexport default function ProductReviews({ product }) {\n    const { user } = useAuth();\n    const router = useRouter();\n    const [rating, setRating] = useState(0); // State for the new review's rating\n    const [comment, setComment] = useState('');\n    const [message, setMessage] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    // This is for the date hydration fix\n    const [isMounted, setIsMounted] = useState(false);\n    useEffect(() => {\n        setIsMounted(true);\n    }, []);\n\n    const submitHandler = async (e) => {\n        e.preventDefault();\n        if (rating === 0) {\n            setMessage('Please select a star rating.');\n            return;\n        }\n        setMessage('');\n        setLoading(true);\n\n        try {\n            const res = await fetch(`http://localhost:5000/api/products/${product._id}/reviews`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${user.token}`,\n                },\n                body: JSON.stringify({ rating, comment }),\n            });\n            const data = await res.json();\n            if (!res.ok) throw new Error(data.message || 'Failed to submit review');\n            \n            setRating(0);\n            setComment('');\n            alert('Review submitted successfully!');\n            router.refresh(); // Reloads the page to show the new review\n        } catch (error) {\n            setMessage(error.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n    \n    return (\n        <div className=\"mt-12\">\n            <h2 className=\"text-2xl font-bold mb-4\">Reviews</h2>\n            {product.reviews.length === 0 && <p className=\"text-gray-500\">No reviews yet.</p>}\n            \n            <div className=\"space-y-4 mb-8\">\n                {product.reviews.map((review) => (\n                    <div key={review._id} className=\"p-4 border rounded-md bg-white\">\n                        <div className=\"flex items-center mb-1\">\n                            <strong className=\"mr-2\">{review.name}</strong>\n                            {/* Use our custom component for horizontal display */}\n                            <StarRating rating={review.rating} />\n                        </div>\n                        {isMounted && (\n                             <p className=\"text-gray-500 text-sm mb-2\">{new Date(review.createdAt).toLocaleDateString()}</p>\n                        )}\n                        <p>{review.comment}</p>\n                    </div>\n                ))}\n            </div>\n\n            {user ? (\n                <form onSubmit={submitHandler} className=\"p-6 border rounded-md bg-gray-50\">\n                    <h3 className=\"text-xl font-semibold mb-2\">Write a Customer Review</h3>\n                    {message && <p className=\"text-red-500 mb-2\">{message}</p>}\n                    \n                    {/* === OUR NEW, GUARANTEED WORKING RATING INPUT === */}\n                    <div className=\"mb-2\">\n                        <label className=\"block font-medium mb-1\">Your Rating</label>\n                        <div className=\"flex items-center\">\n                            {[...Array(5)].map((_, index) => {\n                                const starValue = index + 1;\n                                return (\n                                    <StarIcon \n                                        key={index}\n                                        filled={starValue <= rating}\n                                        onClick={() => setRating(starValue)}\n                                    />\n                                );\n                            })}\n                        </div>\n                    </div>\n                    {/* ============================================== */}\n\n                    <div className=\"mb-4\">\n                        <label htmlFor=\"comment\" className=\"block font-medium mb-1\">Your Comment</label>\n                        <textarea\n                            id=\"comment\"\n                            rows=\"3\"\n                            required\n                            value={comment}\n                            onChange={(e) => setComment(e.target.value)}\n                            className=\"w-full p-2 border rounded-md\"\n                        ></textarea>\n                    </div>\n                    <button type=\"submit\" disabled={loading} className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400\">\n                        {loading ? 'Submitting...' : 'Submit Review'}\n                    </button>\n                </form>\n            ) : (\n                <p className=\"p-4 border rounded-md bg-gray-100 text-center\">Please <Link href=\"/login\" className=\"font-bold text-green-600 hover:underline\">log in</Link> to write a review.</p>\n            )}\n        </div>\n    );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}