{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/components/ProductActions.js"],"sourcesContent":["// frontend/src/components/ProductActions.js\n\"use client\";\n\nimport { useState } from \"react\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport { FaShoppingCart } from \"react-icons/fa\";\nimport { ImSpinner2 } from \"react-icons/im\";\n\nexport default function ProductActions({ product }) {\n  const { user } = useAuth();\n  const [loading, setLoading] = useState(false);\n\n  const handleAddToCart = async () => {\n    if (!user) {\n      alert(\"Please log in to add items to your cart.\");\n      return;\n    }\n    try {\n      setLoading(true);\n      const res = await fetch(`http://localhost:5000/api/cart/add`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${user.token}`,\n        },\n        body: JSON.stringify({ productId: product._id, quantity: 1 }),\n      });\n      if (!res.ok) throw new Error(\"Failed to add to cart\");\n      alert(\"✅ Product added to cart successfully!\");\n    } catch (error) {\n      console.error(error);\n      alert(\"❌ Error adding product to cart.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <button\n      onClick={handleAddToCart}\n      disabled={product.quantity === 0 || loading}\n      className={`w-full flex items-center justify-center gap-2 font-semibold py-3 px-5 rounded-xl \n        transition-all duration-300 shadow-md\n        ${\n          product.quantity > 0 && !loading\n            ? \"bg-gradient-to-r from-green-600 to-emerald-500 text-white hover:from-green-700 hover:to-emerald-600 active:scale-95\"\n            : \"bg-gray-200 cursor-not-allowed text-gray-500\"\n        }`}\n    >\n      {loading ? (\n        <>\n          <ImSpinner2 className=\"animate-spin\" size={20} />\n          <span>Adding...</span>\n        </>\n      ) : product.quantity > 0 ? (\n        <>\n          <FaShoppingCart size={18} />\n          <span>Add to Cart</span>\n        </>\n      ) : (\n        \"Out of Stock\"\n      )}\n    </button>\n  );\n}\n"],"names":[],"mappings":"AAAA,4CAA4C;;;;;;AAG5C;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS,eAAe,EAAE,OAAO,EAAE;IAChD,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,wIAAO;IACxB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,kBAAkB;QACtB,IAAI,CAAC,MAAM;YACT,MAAM;YACN;QACF;QACA,IAAI;YACF,WAAW;YACX,MAAM,MAAM,MAAM,MAAM,CAAC,kCAAkC,CAAC,EAAE;gBAC5D,QAAQ;gBACR,SAAS;oBACP,gBAAgB;oBAChB,eAAe,CAAC,OAAO,EAAE,KAAK,KAAK,EAAE;gBACvC;gBACA,MAAM,KAAK,SAAS,CAAC;oBAAE,WAAW,QAAQ,GAAG;oBAAE,UAAU;gBAAE;YAC7D;YACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAC7B,MAAM;QACR,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QACC,SAAS;QACT,UAAU,QAAQ,QAAQ,KAAK,KAAK;QACpC,WAAW,CAAC;;QAEV,EACE,QAAQ,QAAQ,GAAG,KAAK,CAAC,UACrB,wHACA,gDACJ;kBAEH,wBACC;;8BACE,8OAAC,4JAAU;oBAAC,WAAU;oBAAe,MAAM;;;;;;8BAC3C,8OAAC;8BAAK;;;;;;;2BAEN,QAAQ,QAAQ,GAAG,kBACrB;;8BACE,8OAAC,gKAAc;oBAAC,MAAM;;;;;;8BACtB,8OAAC;8BAAK;;;;;;;2BAGR;;;;;;AAIR","debugId":null}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/components/StarRating.js"],"sourcesContent":["\"use client\";\nimport { Rating } from 'react-simple-star-rating';\n\nexport default function StarRating({ rating, numReviews }) {\n    // The main container uses flexbox to align items horizontally\n    return (\n        <div className=\"flex items-center space-x-2\">\n            <Rating\n                initialValue={rating}\n                readonly\n                size={20}\n                fillColor=\"#f59e0b\" // A bright yellow/amber color for the stars\n                emptyColor=\"#d1d5db\" // A light gray for the empty stars\n                allowFraction // This allows for average ratings like 4.5\n            />\n            {/* Show the number of reviews next to the stars */}\n            {numReviews > 0 && (\n                 <span className=\"text-gray-600 text-sm\">\n                    ({numReviews} {numReviews === 1 ? 'review' : 'reviews'})\n                </span>\n            )}\n        </div>\n    );\n}"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS,WAAW,EAAE,MAAM,EAAE,UAAU,EAAE;IACrD,8DAA8D;IAC9D,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC,4KAAM;gBACH,cAAc;gBACd,QAAQ;gBACR,MAAM;gBACN,WAAU;gBACV,YAAW;gBACX,aAAa;;;;;;YAGhB,aAAa,mBACT,8OAAC;gBAAK,WAAU;;oBAAwB;oBACnC;oBAAW;oBAAE,eAAe,IAAI,WAAW;oBAAU;;;;;;;;;;;;;AAK3E","debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/components/ProductReviews.js"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from 'react'; // <-- Import useEffect\nimport { useAuth } from '@/context/AuthContext';\nimport { Rating } from 'react-simple-star-rating';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\n\nexport default function ProductReviews({ product }) {\n    const { user } = useAuth();\n    const router = useRouter();\n    const [rating, setRating] = useState(0);\n    const [comment, setComment] = useState('');\n    const [message, setMessage] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    // === THIS IS THE GUARANTEED FIX FOR THE DATE HYDRATION ERROR ===\n    const [isMounted, setIsMounted] = useState(false);\n    useEffect(() => {\n        setIsMounted(true);\n    }, []);\n    // =============================================================\n\n    const handleRating = (rate) => {\n        setRating(rate);\n    };\n\n    const submitHandler = async (e) => {\n        e.preventDefault();\n        setMessage('');\n        setLoading(true);\n\n        try {\n            const res = await fetch(`http://localhost:5000/api/products/${product._id}/reviews`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${user.token}`,\n                },\n                body: JSON.stringify({ rating, comment }),\n            });\n\n            const data = await res.json();\n            if (!res.ok) {\n                throw new Error(data.message || 'Failed to submit review');\n            }\n            \n            setRating(0);\n            setComment('');\n            alert('Review submitted successfully!');\n            router.refresh();\n        } catch (error) {\n            setMessage(error.message);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"mt-12\">\n            <h2 className=\"text-2xl font-bold mb-4\">Reviews</h2>\n            {product.reviews.length === 0 && <p className=\"text-gray-500\">No reviews yet.</p>}\n            \n            <div className=\"space-y-4 mb-8\">\n                {product.reviews.map((review) => (\n                    <div key={review._id} className=\"p-4 border rounded-md bg-white\">\n                        <div className=\"flex items-center mb-1\">\n                            <strong className=\"mr-2\">{review.name}</strong>\n                            <Rating initialValue={review.rating} readonly size={16} fillColor=\"#f59e0b\" />\n                        </div>\n                        \n                        {/* We only render the date if the component is mounted on the client */}\n                        {isMounted && (\n                            <p className=\"text-gray-500 text-sm mb-2\">\n                                {new Date(review.createdAt).toLocaleDateString()}\n                            </p>\n                        )}\n\n                        <p>{review.comment}</p>\n                    </div>\n                ))}\n            </div>\n\n            {user ? (\n                <form onSubmit={submitHandler} className=\"p-6 border rounded-md bg-gray-50\">\n                    <h3 className=\"text-xl font-semibold mb-2\">Write a Customer Review</h3>\n                    {message && <p className=\"text-red-500 mb-2\">{message}</p>}\n                    <div className=\"mb-2\">\n                        <label className=\"block font-medium mb-1\">Your Rating</label>\n                        <Rating onClick={handleRating} initialValue={rating} size={28} />\n                    </div>\n                    <div className=\"mb-4\">\n                        <label htmlFor=\"comment\" className=\"block font-medium mb-1\">Your Comment</label>\n                        <textarea\n                            id=\"comment\"\n                            rows=\"3\"\n                            required\n                            value={comment}\n                            onChange={(e) => setComment(e.target.value)}\n                            className=\"w-full p-2 border rounded-md\"\n                        ></textarea>\n                    </div>\n                    <button type=\"submit\" disabled={loading} className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400\">\n                        {loading ? 'Submitting...' : 'Submit Review'}\n                    </button>\n                </form>\n            ) : (\n                <p className=\"p-4 border rounded-md bg-gray-100 text-center\">Please <Link href=\"/login\" className=\"font-bold text-green-600 hover:underline\">log in</Link> to write a review.</p>\n            )}\n        </div>\n    );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}