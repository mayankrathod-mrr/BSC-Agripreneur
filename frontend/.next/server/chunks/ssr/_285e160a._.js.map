{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/app/cart/page.js"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\nimport { useRouter } from \"next/navigation\";\nimport { FaImage } from \"react-icons/fa\";\n\nexport default function CartPage() {\n  const { user } = useAuth();\n  const router = useRouter();\n  const [cart, setCart] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const fetchCart = async () => {\n    if (!user) {\n      setLoading(false);\n      return;\n    }\n    try {\n      setLoading(true);\n      const res = await fetch(\"http://localhost:5000/api/cart\", {\n        headers: { Authorization: `Bearer ${user.token}` },\n      });\n      if (!res.ok) throw new Error(\"Failed to fetch cart\");\n      const data = await res.json();\n      setCart(data);\n    } catch (error) {\n      console.error(\"Failed to fetch cart:\", error);\n      setCart({ products: [] });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchCart();\n  }, [user]);\n\n  const handleRemoveItem = async (productId) => {\n    try {\n      const res = await fetch(\n        `http://localhost:5000/api/cart/remove/${productId}`,\n        {\n          method: \"DELETE\",\n          headers: { Authorization: `Bearer ${user.token}` },\n        }\n      );\n      if (!res.ok) throw new Error(\"Failed to remove item\");\n      const data = await res.json();\n      setCart(data);\n    } catch (error) {\n      console.error(\"Failed to remove item:\", error);\n      alert(\"Error removing item.\");\n    }\n  };\n\n  const handleCheckout = async () => {\n    try {\n      const res = await fetch(\"http://localhost:5000/api/orders/checkout\", {\n        method: \"POST\",\n        headers: { Authorization: `Bearer ${user.token}` },\n      });\n      if (!res.ok) throw new Error(\"Checkout failed\");\n      alert(\"Order placed successfully!\");\n      router.push(\"/orders\");\n    } catch (error) {\n      console.error(error);\n      alert(\"Error placing order.\");\n    }\n  };\n\n  const calculateSubtotal = () => {\n    if (!cart || !cart.products) return \"0.00\";\n    return cart.products\n      .reduce((total, item) => {\n        if (item.product) {\n          return total + item.product.price * item.quantity;\n        }\n        return total;\n      }, 0)\n      .toFixed(2);\n  };\n\n  if (loading)\n    return <p className=\"text-center py-12\">Loading your cart...</p>;\n  if (!user)\n    return (\n      <p className=\"text-center py-12\">\n        Please{\" \"}\n        <Link href=\"/login\" className=\"text-green-600 underline\">\n          log in\n        </Link>{\" \"}\n        to view your cart.\n      </p>\n    );\n  if (!cart || cart.products.length === 0)\n    return <p className=\"text-center py-12\">Your cart is empty.</p>;\n\n  return (\n    <div className=\"container mx-auto py-12 px-4\">\n      <h1 className=\"text-3xl font-bold mb-8\">Your Shopping Cart</h1>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n        {/* Left Section - Cart Items */}\n        <div className=\"md:col-span-2 space-y-4\">\n          {cart.products.map(\n            (item) =>\n              item.product && (\n                <div\n                  key={item.product._id}\n                  className=\"flex items-center justify-between p-4 border rounded-lg shadow-sm bg-white\"\n                >\n                  <div className=\"flex items-center space-x-4\">\n                    {item.product.mainImage ? (\n                      <Image\n                        src={item.product.mainImage}\n                        alt={item.product.name}\n                        width={80}\n                        height={80}\n                        className=\"rounded object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-20 h-20 bg-gray-200 flex items-center justify-center rounded\">\n                        <FaImage className=\"text-gray-400\" size={24} />\n                      </div>\n                    )}\n                    <div>\n                      <h2 className=\"font-semibold\">{item.product.name}</h2>\n                      <p className=\"text-gray-600\">\n                        ₹{item.product.price.toFixed(2)}\n                      </p>\n                      <p className=\"text-gray-500 text-sm\">\n                        Total: ₹\n                        {(item.product.price * item.quantity).toFixed(2)}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-4\">\n                    <p>Qty: {item.quantity}</p>\n                    <button\n                      onClick={() => handleRemoveItem(item.product._id)}\n                      className=\"text-red-500 hover:text-red-700 font-semibold\"\n                    >\n                      Remove\n                    </button>\n                  </div>\n                </div>\n              )\n          )}\n        </div>\n\n        {/* Right Section - Summary */}\n        <div className=\"bg-gray-100 p-6 rounded-lg self-start\">\n          <h2 className=\"text-xl font-bold mb-4 text-black\">Order Summary</h2>\n          <div className=\"flex justify-between mb-2 text-black\">\n            <span>Subtotal</span>\n            <span>₹{calculateSubtotal()}</span>\n          </div>\n          <div className=\"flex justify-between font-bold text-lg border-t pt-2 text-black\">\n            <span>Total</span>\n            <span>₹{calculateSubtotal()}</span>\n          </div>\n\n          <button\n            onClick={handleCheckout}\n            className=\"w-full mt-6 bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 font-bold\"\n          >\n            Proceed to Checkout\n          </button>\n\n          {/* Continue Shopping */}\n          <Link\n            href=\"/products\"\n            className=\"block w-full mt-3 text-center text-green-600 font-semibold hover:underline\"\n          >\n            ← Continue Shopping\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 369, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}