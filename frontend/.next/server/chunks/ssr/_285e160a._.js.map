{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/app/cart/page.js"],"sourcesContent":["// frontend/src/app/cart/page.js\n\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { useRouter } from 'next/navigation';\n\nexport default function CartPage() {\n    const { user } = useAuth();\n    const router = useRouter();\n    const [cart, setCart] = useState(null);\n    const [loading, setLoading] = useState(true);\n\n    const fetchCart = async () => {\n        if (!user) {\n            setLoading(false);\n            return;\n        };\n        \n        try {\n            setLoading(true);\n            const res = await fetch('http://localhost:5000/api/cart', {\n                headers: { 'Authorization': `Bearer ${user.token}` }\n            });\n            if (res.status === 404) { // Handle case where cart doesn't exist yet\n                setCart({ products: [] });\n                return;\n            }\n            if (!res.ok) throw new Error('Failed to fetch cart');\n            const data = await res.json();\n            setCart(data);\n        } catch (error) {\n            console.error(\"Failed to fetch cart:\", error);\n            setCart(null);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchCart();\n    }, [user]);\n\n    const handleRemoveItem = async (productId) => {\n        // ... (This function remains the same)\n        try {\n            const res = await fetch(`http://localhost:5000/api/cart/remove/${productId}`, {\n                method: 'DELETE',\n                headers: { 'Authorization': `Bearer ${user.token}` }\n            });\n            if (!res.ok) throw new Error('Failed to remove item');\n            fetchCart(); // Refresh cart after removing\n        } catch (error) {\n            console.error(\"Failed to remove item:\", error);\n            alert('Error removing item.');\n        }\n    };\n\n    const handleCheckout = async () => {\n        if (!user) {\n            alert('Please log in to proceed.');\n            return;\n        }\n        try {\n            const res = await fetch('http://localhost:5000/api/orders/checkout', {\n                method: 'POST',\n                headers: { \n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${user.token}` \n                }\n            });\n\n            if (!res.ok) {\n                const errorData = await res.json();\n                throw new Error(errorData.message || 'Checkout failed');\n            }\n            \n            alert('Order placed successfully!');\n            router.push('/orders');\n        } catch (error) {\n            console.error(\"Checkout Error:\", error);\n            alert(`Error placing order: ${error.message}`);\n        }\n    };\n\n    const calculateSubtotal = () => {\n        if (!cart || !cart.products) return '0.00';\n        return cart.products.reduce((total, item) => {\n            return total + item.product.price * item.quantity;\n        }, 0).toFixed(2);\n    };\n\n    if (loading) return <p className=\"text-center py-12\">Loading your cart...</p>;\n    if (!user) return <p className=\"text-center py-12\">Please <Link href=\"/login\" className=\"text-green-600 underline\">log in</Link> to view your cart.</p>;\n    if (!cart || cart.products.length === 0) return <p className=\"text-center py-12\">Your cart is empty.</p>;\n\n    return (\n        <div className=\"container mx-auto py-12\">\n            <h1 className=\"text-3xl font-bold mb-8\">Your Shopping Cart</h1>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n                <div className=\"md:col-span-2 space-y-4\">\n                    {cart.products.map(item => (\n                        <div key={item.product._id} className=\"flex items-center justify-between p-4 border rounded-lg shadow-sm\">\n                            <div className=\"flex items-center space-x-4\">\n                                <Image src=\"/placeholder.png\" alt={item.product.name} width={80} height={80} className=\"rounded\" />\n                                <div>\n                                    <h2 className=\"font-semibold\">{item.product.name}</h2>\n                                    <p className=\"text-gray-600\">₹{item.product.price.toFixed(2)}</p>\n                                </div>\n                            </div>\n                            <div className=\"flex items-center space-x-4\">\n                                <p>Qty: {item.quantity}</p>\n                                <button onClick={() => handleRemoveItem(item.product._id)} className=\"text-red-500 hover:text-red-700 font-semibold\">Remove</button>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n                <div className=\"bg-gray-100 p-6 rounded-lg self-start\">\n                    <h2 className=\"text-xl font-bold mb-4 text-black\">Order Summary</h2>\n                    <div className=\"flex justify-between mb-2 text-black\">\n                        <span>Subtotal</span>\n                        <span>₹{calculateSubtotal()}</span>\n                    </div>\n                    <div className=\"flex justify-between font-bold text-lg border-t pt-2 text-black\">\n                        <span>Total</span>\n                        <span>₹{calculateSubtotal()}</span>\n                    </div>\n                    <button onClick={handleCheckout} className=\"w-full mt-6 bg-green-600 text-white py-2 rounded-lg hover:bg-green-500 font-bold\">\n                        Proceed to Checkout\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 342, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}