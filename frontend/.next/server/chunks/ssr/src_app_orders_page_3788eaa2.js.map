{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/app/orders/page.js"],"sourcesContent":["// frontend/src/app/orders/page.js\n\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport Link from \"next/link\";\n\nexport default function OrdersPage() {\n  const { user } = useAuth();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchOrders = async () => {\n      if (!user) {\n        setLoading(false);\n        return;\n      }\n      try {\n        const res = await fetch(\"http://localhost:5000/api/orders/myorders\", {\n          headers: { Authorization: `Bearer ${user.token}` },\n        });\n        if (!res.ok) throw new Error(\"Failed to fetch orders\");\n        const data = await res.json();\n        setOrders(data);\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchOrders();\n  }, [user]);\n\n  if (loading)\n    return (\n      <p className=\"text-center py-12 text-gray-300\">\n        Loading your orders...\n      </p>\n    );\n\n  if (!user)\n    return (\n      <p className=\"text-center py-12 text-gray-300\">\n        Please{\" \"}\n        <Link href=\"/login\" className=\"text-green-400 underline font-semibold\">\n          log in\n        </Link>{\" \"}\n        to see your orders.\n      </p>\n    );\n\n  return (\n    <div className=\"container mx-auto py-12 px-4\">\n      {/* Page Title */}\n      <h1 className=\"text-4xl font-extrabold text-center mb-10 text-white drop-shadow-lg\">\n        ðŸ“¦ Your Order History\n      </h1>\n\n      {orders.length === 0 ? (\n        <p className=\"text-center text-gray-400\">\n          You have no past orders.\n        </p>\n      ) : (\n        <div className=\"space-y-8\">\n          {orders.map((order) => (\n            <div\n              key={order._id}\n              className=\"bg-gray-900/70 border border-gray-700 rounded-xl shadow-lg p-6 hover:shadow-xl transition\"\n            >\n              {/* Order Header */}\n              <div className=\"flex flex-col md:flex-row md:justify-between md:items-center mb-4\">\n                <div>\n                  <p className=\"font-bold text-white\">\n                    Order ID:{\" \"}\n                    <span className=\"text-gray-400 font-normal\">\n                      {order._id}\n                    </span>\n                  </p>\n                  <p className=\"text-sm text-gray-500\">\n                    Date: {new Date(order.createdAt).toLocaleDateString()}\n                  </p>\n                </div>\n                <div className=\"mt-3 md:mt-0 text-right\">\n                  <p className=\"font-bold text-lg text-green-400\">\n                    â‚¹{order.totalPrice.toFixed(2)}\n                  </p>\n                  <span\n                    className={`inline-block mt-2 px-3 py-1 text-sm font-semibold rounded-full \n                      ${\n                        order.status === \"Delivered\"\n                          ? \"bg-green-100 text-green-700\"\n                          : order.status === \"Cancelled\"\n                          ? \"bg-red-100 text-red-600\"\n                          : \"bg-yellow-100 text-yellow-700\"\n                      }`}\n                  >\n                    {order.status}\n                  </span>\n                </div>\n              </div>\n\n              {/* Items List */}\n              <div className=\"divide-y divide-gray-700\">\n                {order.orderItems.map((item) => (\n                  <div\n                    key={item.product}\n                    className=\"flex justify-between items-center py-3\"\n                  >\n                    <span className=\"text-gray-200\">\n                      {item.name}{\" \"}\n                      <span className=\"text-sm text-gray-400\">\n                        (x{item.quantity})\n                      </span>\n                    </span>\n                    <span className=\"font-medium text-white\">\n                      â‚¹{(item.price * item.quantity).toFixed(2)}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;AAGlC;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,wIAAO;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,cAAc;YAClB,IAAI,CAAC,MAAM;gBACT,WAAW;gBACX;YACF;YACA,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,6CAA6C;oBACnE,SAAS;wBAAE,eAAe,CAAC,OAAO,EAAE,KAAK,KAAK,EAAE;oBAAC;gBACnD;gBACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;gBAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,UAAU;YACZ,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC;YAChB,SAAU;gBACR,WAAW;YACb;QACF;QACA;IACF,GAAG;QAAC;KAAK;IAET,IAAI,SACF,qBACE,8OAAC;QAAE,WAAU;kBAAkC;;;;;;IAKnD,IAAI,CAAC,MACH,qBACE,8OAAC;QAAE,WAAU;;YAAkC;YACtC;0BACP,8OAAC,uKAAI;gBAAC,MAAK;gBAAS,WAAU;0BAAyC;;;;;;YAE/D;YAAI;;;;;;;IAKlB,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAG,WAAU;0BAAsE;;;;;;YAInF,OAAO,MAAM,KAAK,kBACjB,8OAAC;gBAAE,WAAU;0BAA4B;;;;;qCAIzC,8OAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;wBAEC,WAAU;;0CAGV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAE,WAAU;;oDAAuB;oDACxB;kEACV,8OAAC;wDAAK,WAAU;kEACb,MAAM,GAAG;;;;;;;;;;;;0DAGd,8OAAC;gDAAE,WAAU;;oDAAwB;oDAC5B,IAAI,KAAK,MAAM,SAAS,EAAE,kBAAkB;;;;;;;;;;;;;kDAGvD,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAE,WAAU;;oDAAmC;oDAC5C,MAAM,UAAU,CAAC,OAAO,CAAC;;;;;;;0DAE7B,8OAAC;gDACC,WAAW,CAAC;sBACV,EACE,MAAM,MAAM,KAAK,cACb,gCACA,MAAM,MAAM,KAAK,cACjB,4BACA,iCACJ;0DAEH,MAAM,MAAM;;;;;;;;;;;;;;;;;;0CAMnB,8OAAC;gCAAI,WAAU;0CACZ,MAAM,UAAU,CAAC,GAAG,CAAC,CAAC,qBACrB,8OAAC;wCAEC,WAAU;;0DAEV,8OAAC;gDAAK,WAAU;;oDACb,KAAK,IAAI;oDAAE;kEACZ,8OAAC;wDAAK,WAAU;;4DAAwB;4DACnC,KAAK,QAAQ;4DAAC;;;;;;;;;;;;;0DAGrB,8OAAC;gDAAK,WAAU;;oDAAyB;oDACrC,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,EAAE,OAAO,CAAC;;;;;;;;uCAVpC,KAAK,OAAO;;;;;;;;;;;uBAvClB,MAAM,GAAG;;;;;;;;;;;;;;;;AA4D5B","debugId":null}}]
}