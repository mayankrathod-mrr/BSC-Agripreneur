{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/app/admin/page.js"],"sourcesContent":["\"use client\";\n\nimport { useState } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useRouter } from 'next/navigation';\n// We don't need the AdminRoute component here, we can do the check directly\n// import AdminRoute from '@/components/AdminRoute'; \n\nconst AddProductPage = () => {\n    const { user } = useAuth();\n    const router = useRouter();\n\n    const [name, setName] = useState('');\n    const [category, setCategory] = useState('seeds');\n    const [description, setDescription] = useState('');\n    const [quantity, setQuantity] = useState(1);\n    const [price, setPrice] = useState(0);\n    const [beforeImage, setBeforeImage] = useState(null);\n    const [afterImage, setAfterImage] = useState(null);\n    const [message, setMessage] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        if (!beforeImage) { // Now, we require at least the main product image\n            setMessage('Please upload the main product image.');\n            return;\n        }\n        \n        setLoading(true);\n        setMessage('');\n        const formData = new FormData();\n        formData.append('name', name);\n        formData.append('category', category);\n        formData.append('description', description);\n        formData.append('quantity', quantity);\n        formData.append('price', price);\n        formData.append('beforeImage', beforeImage);\n        if (afterImage) {\n            formData.append('afterImage', afterImage);\n        }\n\n        try {\n            const res = await fetch('http://localhost:5000/api/products', {\n                method: 'POST',\n                headers: { 'Authorization': `Bearer ${user.token}` },\n                body: formData,\n            });\n            const data = await res.json();\n            if (!res.ok) throw new Error(data.message || 'Failed to add product');\n\n            alert('Product added successfully!');\n            router.push('/products');\n        } catch (error) {\n            setMessage(error.message);\n            console.error(error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!user || user.role !== 'admin') {\n        return <p className=\"text-center py-12\">Access Denied. You must be an admin to view this page.</p>;\n    }\n\n    return (\n        <div className=\"container mx-auto py-12 px-4\">\n            <h1 className=\"text-3xl font-bold text-center mb-8\">Admin Dashboard - Add Product</h1>\n            <form onSubmit={handleSubmit} className=\"max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-md space-y-4\">\n                {/* Text fields remain the same */}\n                <div>\n                    <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">Product Name</label>\n                    <input type=\"text\" id=\"name\" value={name} onChange={(e) => setName(e.target.value)} required className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500\" />\n                </div>\n                {/* ... other fields ... */}\n                 <div>\n                    <label htmlFor=\"category\" className=\"block text-sm font-medium text-gray-700\">Category</label>\n                    <select id=\"category\" value={category} onChange={(e) => setCategory(e.target.value)} required className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500\">\n                        <option value=\"seeds\">Seeds</option>\n                        <option value=\"fertilizers\">Fertilizers</option>\n                        <option value=\"pesticides\">Pesticides</option>\n                    </select>\n                </div>\n                <div>\n                    <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700\">Description</label>\n                    <textarea id=\"description\" rows=\"3\" value={description} onChange={(e) => setDescription(e.target.value)} required className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500\"></textarea>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                        <label htmlFor=\"quantity\" className=\"block text-sm font-medium text-gray-700\">Stock Quantity</label>\n                        <input type=\"number\" id=\"quantity\" value={quantity} onChange={(e) => setQuantity(e.target.value)} required className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500\" />\n                    </div>\n                    <div>\n                        <label htmlFor=\"price\" className=\"block text-sm font-medium text-gray-700\">Price (â‚¹)</label>\n                        <input type=\"number\" id=\"price\" value={price} onChange={(e) => setPrice(e.target.value)} required className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500\" />\n                    </div>\n                </div>\n\n                {/* --- IMAGE UPLOADS (LABELS UPDATED) --- */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                        <label htmlFor=\"beforeImage\" className=\"block text-sm font-medium text-gray-700\">Main Product Image (Required)</label>\n                        <input type=\"file\" id=\"beforeImage\" onChange={(e) => setBeforeImage(e.target.files[0])} required className=\"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"/>\n                    </div>\n                    <div>\n                        <label htmlFor=\"afterImage\" className=\"block text-sm font-medium text-gray-700\">\"After\" Result Image (Optional)</label>\n                        <input type=\"file\" id=\"afterImage\" onChange={(e) => setAfterImage(e.target.files[0])} className=\"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100\"/>\n                    </div>\n                </div>\n                {/* ------------------------------------------- */}\n\n                <button type=\"submit\" disabled={loading} className=\"w-full py-3 px-4 bg-green-600 text-white font-bold rounded-md hover:bg-green-700 transition-colors disabled:bg-gray-400\">\n                    {loading ? 'Uploading...' : 'Add Product'}\n                </button>\n                {message && <p className=\"text-center text-sm text-red-500 pt-4\">{message}</p>}\n            </form>\n        </div>\n    );\n};\n\nexport default AddProductPage;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 371, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}