{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/app/cart/page.js"],"sourcesContent":["// frontend/src/app/cart/page.js\n\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\nimport { useRouter } from \"next/navigation\";\n\nexport default function CartPage() {\n  const { user } = useAuth();\n  const router = useRouter();\n  const [cart, setCart] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const fetchCart = async () => {\n    if (!user) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const res = await fetch(\"http://localhost:5000/api/cart\", {\n        headers: { Authorization: `Bearer ${user.token}` },\n      });\n      if (res.status === 404) {\n        setCart({ products: [] });\n        return;\n      }\n      if (!res.ok) throw new Error(\"Failed to fetch cart\");\n      const data = await res.json();\n      setCart(data);\n    } catch (error) {\n      console.error(\"Failed to fetch cart:\", error);\n      setCart(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchCart();\n  }, [user]);\n\n  const handleRemoveItem = async (productId) => {\n    try {\n      const res = await fetch(\n        `http://localhost:5000/api/cart/remove/${productId}`,\n        {\n          method: \"DELETE\",\n          headers: { Authorization: `Bearer ${user.token}` },\n        }\n      );\n      if (!res.ok) throw new Error(\"Failed to remove item\");\n      fetchCart();\n    } catch (error) {\n      console.error(\"Failed to remove item:\", error);\n      alert(\"Error removing item.\");\n    }\n  };\n\n  const handleCheckout = async () => {\n    try {\n      const res = await fetch(\"http://localhost:5000/api/orders/checkout\", {\n        method: \"POST\",\n        headers: { Authorization: `Bearer ${user.token}` },\n      });\n      if (!res.ok) throw new Error(\"Checkout failed\");\n      alert(\"âœ… Order placed successfully!\");\n      router.push(\"/orders\");\n    } catch (error) {\n      console.error(error);\n      alert(\"Error placing order.\");\n    }\n  };\n\n  const calculateSubtotal = () => {\n    if (!cart || !cart.products) return \"0.00\";\n    return cart.products\n      .reduce((total, item) => total + item.product.price * item.quantity, 0)\n      .toFixed(2);\n  };\n\n  // === Different States ===\n  if (loading)\n    return <p className=\"text-center py-12 text-gray-600\">Loading your cart...</p>;\n\n  if (!user)\n    return (\n      <p className=\"text-center py-12 text-gray-700\">\n        Please{\" \"}\n        <Link href=\"/login\" className=\"text-green-600 underline font-medium\">\n          log in\n        </Link>{\" \"}\n        to view your cart.\n      </p>\n    );\n\n  if (!cart || cart.products.length === 0)\n    return (\n      <p className=\"text-center py-12 text-gray-700\">\n        Your cart is empty.{\" \"}\n        <Link href=\"/products\" className=\"text-green-600 underline font-medium\">\n          Start shopping\n        </Link>\n      </p>\n    );\n\n  // === Cart Page ===\n  return (\n    <div className=\"container mx-auto py-12 px-4\">\n      <h1 className=\"text-3xl font-bold mb-8\">ðŸ›’ Your Shopping Cart</h1>\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n        {/* Cart Items */}\n        <div className=\"md:col-span-2 space-y-4\">\n          {cart.products.map((item) => (\n            <div\n              key={item.product._id}\n              className=\"flex items-center justify-between p-4 bg-white border rounded-lg shadow hover:shadow-md transition\"\n            >\n              <div className=\"flex items-center space-x-4 min-w-0\">\n                <Image\n                  src={item.product.beforeImage}\n                  alt={item.product.name}\n                  width={80}\n                  height={80}\n                  className=\"rounded-md object-cover flex-shrink-0\"\n                />\n                <div className=\"min-w-0\">\n                  <h2 className=\"font-semibold text-lg text-gray-900 truncate max-w-[200px] sm:max-w-[300px] md:max-w-[400px]\">\n                    {item.product.name}\n                  </h2>\n                  <p className=\"text-gray-600\">â‚¹{item.product.price.toFixed(2)}</p>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-4 flex-shrink-0\">\n                <p className=\"text-gray-700\">Qty: {item.quantity}</p>\n                <button\n                  onClick={() => handleRemoveItem(item.product._id)}\n                  className=\"text-red-500 hover:text-red-700 font-semibold transition\"\n                >\n                  Remove\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* Order Summary */}\n        <div className=\"bg-white border rounded-lg shadow p-6 self-start\">\n          <h2 className=\"text-xl font-bold mb-4 text-black\">Order Summary</h2>\n          <div className=\"flex justify-between mb-2 text-gray-700\">\n            <span>Subtotal</span>\n            <span>â‚¹{calculateSubtotal()}</span>\n          </div>\n          <div className=\"flex justify-between font-bold text-lg border-t pt-2 text-black\">\n            <span>Total</span>\n            <span>â‚¹{calculateSubtotal()}</span>\n          </div>\n          <button\n            onClick={handleCheckout}\n            className=\"w-full mt-6 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 font-bold transition\"\n          >\n            Proceed to Checkout\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}