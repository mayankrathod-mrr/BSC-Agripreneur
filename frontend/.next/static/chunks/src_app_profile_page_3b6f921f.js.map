{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/app/profile/page.js"],"sourcesContent":["// frontend/src/app/profile/page.js\n\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '@/context/AuthContext';\n\nexport default function ProfilePage() {\n    const { user, login } = useAuth(); // We need 'login' to update the context\n    const [name, setName] = useState('');\n    const [email, setEmail] = useState('');\n    const [message, setMessage] = useState('');\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        if (user) {\n            setName(user.name);\n            setEmail(user.email);\n            setLoading(false);\n        }\n    }, [user]);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setMessage('');\n        try {\n            const res = await fetch('http://localhost:5000/api/users/profile', {\n                method: 'PUT',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${user.token}`,\n                },\n                body: JSON.stringify({ name }),\n            });\n            const data = await res.json();\n            if (!res.ok) throw new Error(data.message);\n\n            // IMPORTANT: We call login() again with the updated user data\n            // This will update the user's name everywhere on the site!\n            login(data);\n            setMessage('Profile updated successfully!');\n        } catch (error) {\n            setMessage(`Error: ${error.message}`);\n        }\n    };\n\n    if (loading) return <p className=\"text-center py-12\">Loading profile...</p>;\n\n    return (\n        <div className=\"container mx-auto py-12 px-4\">\n            <h1 className=\"text-3xl font-bold text-center mb-8\">Your Profile</h1>\n            <form onSubmit={handleSubmit} className=\"max-w-md mx-auto bg-white p-8 rounded-lg shadow-md\">\n                <div className=\"mb-4\">\n                    <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">Name</label>\n                    <input type=\"text\" id=\"name\" value={name} onChange={(e) => setName(e.target.value)} required className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2\" />\n                </div>\n                <div className=\"mb-6\">\n                    <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">Email</label>\n                    <input type=\"email\" id=\"email\" value={email} disabled className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 bg-gray-100 cursor-not-allowed\" />\n                </div>\n                <button type=\"submit\" className=\"w-full py-2 px-4 bg-green-600 text-white font-bold rounded-md hover:bg-green-700\">\n                    Update Profile\n                </button>\n                {message && <p className=\"mt-4 text-center text-sm text-green-600\">{message}</p>}\n            </form>\n        </div>\n    );\n}"],"names":[],"mappings":"AAAA,mCAAmC;;;;;;AAGnC;AACA;;;AAHA;;;AAKe,SAAS;;IACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,IAAA,2IAAO,KAAI,wCAAwC;IAC3E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;iCAAC;YACN,IAAI,MAAM;gBACN,QAAQ,KAAK,IAAI;gBACjB,SAAS,KAAK,KAAK;gBACnB,WAAW;YACf;QACJ;gCAAG;QAAC;KAAK;IAET,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,WAAW;QACX,IAAI;YACA,MAAM,MAAM,MAAM,MAAM,2CAA2C;gBAC/D,QAAQ;gBACR,SAAS;oBACL,gBAAgB;oBAChB,iBAAiB,AAAC,UAAoB,OAAX,KAAK,KAAK;gBACzC;gBACA,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAK;YAChC;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,OAAO;YAEzC,8DAA8D;YAC9D,2DAA2D;YAC3D,MAAM;YACN,WAAW;QACf,EAAE,OAAO,OAAO;YACZ,WAAW,AAAC,UAAuB,OAAd,MAAM,OAAO;QACtC;IACJ;IAEA,IAAI,SAAS,qBAAO,6LAAC;QAAE,WAAU;kBAAoB;;;;;;IAErD,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAG,WAAU;0BAAsC;;;;;;0BACpD,6LAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACpC,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAM,SAAQ;gCAAO,WAAU;0CAA0C;;;;;;0CAC1E,6LAAC;gCAAM,MAAK;gCAAO,IAAG;gCAAO,OAAO;gCAAM,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;gCAAG,QAAQ;gCAAC,WAAU;;;;;;;;;;;;kCAE3G,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAM,SAAQ;gCAAQ,WAAU;0CAA0C;;;;;;0CAC3E,6LAAC;gCAAM,MAAK;gCAAQ,IAAG;gCAAQ,OAAO;gCAAO,QAAQ;gCAAC,WAAU;;;;;;;;;;;;kCAEpE,6LAAC;wBAAO,MAAK;wBAAS,WAAU;kCAAmF;;;;;;oBAGlH,yBAAW,6LAAC;wBAAE,WAAU;kCAA2C;;;;;;;;;;;;;;;;;;AAIpF;GA5DwB;;QACI,2IAAO;;;KADX","debugId":null}}]
}