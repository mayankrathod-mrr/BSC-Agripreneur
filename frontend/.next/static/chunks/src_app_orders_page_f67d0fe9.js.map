{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/BSC%20Agripreneur/agri-store/frontend/src/app/orders/page.js"],"sourcesContent":["// frontend/src/app/orders/page.js\n\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useAuth } from \"@/context/AuthContext\";\nimport Link from \"next/link\";\n\nexport default function OrdersPage() {\n  const { user } = useAuth();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchOrders = async () => {\n      if (!user) return;\n      try {\n        const res = await fetch(\"http://localhost:5000/api/orders/myorders\", {\n          headers: { Authorization: `Bearer ${user.token}` },\n        });\n        if (!res.ok) throw new Error(\"Failed to fetch orders\");\n        const data = await res.json();\n        setOrders(data);\n      } catch (error) {\n        console.error(error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchOrders();\n  }, [user]);\n\n  if (loading)\n    return (\n      <p className=\"text-center py-12 text-gray-600 animate-pulse\">\n        Loading your orders...\n      </p>\n    );\n\n  if (!user)\n    return (\n      <p className=\"text-center py-12\">\n        Please{\" \"}\n        <Link href=\"/login\" className=\"text-green-600 underline font-semibold\">\n          log in\n        </Link>{\" \"}\n        to see your orders.\n      </p>\n    );\n\n  return (\n    <div className=\"container mx-auto py-12 px-4\">\n      <h1 className=\"text-3xl font-bold mb-8 text-green-700 text-center\">\n        Your Order History\n      </h1>\n\n      {orders.length === 0 ? (\n        <p className=\"text-center text-gray-500 text-lg\">\n          You don’t have any past orders yet.\n        </p>\n      ) : (\n        <div className=\"space-y-8\">\n          {orders.map((order) => (\n            <div\n              key={order._id}\n              className=\"border border-gray-200 rounded-xl shadow-sm hover:shadow-lg transition p-6 bg-white\"\n            >\n              {/* Header */}\n              <div className=\"flex flex-col md:flex-row md:justify-between md:items-center mb-4\">\n                <div>\n                  <p className=\"text-sm text-gray-500\">\n                    Order ID:{\" \"}\n                    <span className=\"text-gray-800 font-medium\">\n                      {order._id}\n                    </span>\n                  </p>\n                  <p className=\"text-sm text-gray-400\">\n                    Placed on {new Date(order.createdAt).toLocaleDateString()}\n                  </p>\n                </div>\n                <div className=\"mt-3 md:mt-0 text-right\">\n                  <p className=\"font-bold text-lg text-green-700\">\n                    ₹{order.totalPrice.toFixed(2)}\n                  </p>\n                  <span\n                    className={`mt-1 inline-block px-3 py-1 text-xs font-semibold rounded-full ${\n                      order.status === \"Delivered\"\n                        ? \"bg-green-100 text-green-700\"\n                        : order.status === \"Cancelled\"\n                        ? \"bg-red-100 text-red-600\"\n                        : \"bg-yellow-100 text-yellow-700\"\n                    }`}\n                  >\n                    {order.status}\n                  </span>\n                </div>\n              </div>\n\n              {/* Items */}\n              <div className=\"divide-y divide-gray-200\">\n                {order.orderItems.map((item) => (\n                  <div\n                    key={item.product}\n                    className=\"flex justify-between items-center py-3\"\n                  >\n                    <div>\n                      <p className=\"text-gray-800 font-medium\">{item.name}</p>\n                      <p className=\"text-sm text-gray-500\">\n                        Qty: {item.quantity}\n                      </p>\n                    </div>\n                    <span className=\"font-semibold text-gray-700\">\n                      ₹{(item.price * item.quantity).toFixed(2)}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;AAGlC;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,2IAAO;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;gCAAC;YACR,MAAM;oDAAc;oBAClB,IAAI,CAAC,MAAM;oBACX,IAAI;wBACF,MAAM,MAAM,MAAM,MAAM,6CAA6C;4BACnE,SAAS;gCAAE,eAAe,AAAC,UAAoB,OAAX,KAAK,KAAK;4BAAG;wBACnD;wBACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;wBAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;wBAC3B,UAAU;oBACZ,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC;oBAChB,SAAU;wBACR,WAAW;oBACb;gBACF;;YACA;QACF;+BAAG;QAAC;KAAK;IAET,IAAI,SACF,qBACE,6LAAC;QAAE,WAAU;kBAAgD;;;;;;IAKjE,IAAI,CAAC,MACH,qBACE,6LAAC;QAAE,WAAU;;YAAoB;YACxB;0BACP,6LAAC,0KAAI;gBAAC,MAAK;gBAAS,WAAU;0BAAyC;;;;;;YAE/D;YAAI;;;;;;;IAKlB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAqD;;;;;;YAIlE,OAAO,MAAM,KAAK,kBACjB,6LAAC;gBAAE,WAAU;0BAAoC;;;;;qCAIjD,6LAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,sBACX,6LAAC;wBAEC,WAAU;;0CAGV,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAE,WAAU;;oDAAwB;oDACzB;kEACV,6LAAC;wDAAK,WAAU;kEACb,MAAM,GAAG;;;;;;;;;;;;0DAGd,6LAAC;gDAAE,WAAU;;oDAAwB;oDACxB,IAAI,KAAK,MAAM,SAAS,EAAE,kBAAkB;;;;;;;;;;;;;kDAG3D,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAE,WAAU;;oDAAmC;oDAC5C,MAAM,UAAU,CAAC,OAAO,CAAC;;;;;;;0DAE7B,6LAAC;gDACC,WAAW,AAAC,kEAMX,OALC,MAAM,MAAM,KAAK,cACb,gCACA,MAAM,MAAM,KAAK,cACjB,4BACA;0DAGL,MAAM,MAAM;;;;;;;;;;;;;;;;;;0CAMnB,6LAAC;gCAAI,WAAU;0CACZ,MAAM,UAAU,CAAC,GAAG,CAAC,CAAC,qBACrB,6LAAC;wCAEC,WAAU;;0DAEV,6LAAC;;kEACC,6LAAC;wDAAE,WAAU;kEAA6B,KAAK,IAAI;;;;;;kEACnD,6LAAC;wDAAE,WAAU;;4DAAwB;4DAC7B,KAAK,QAAQ;;;;;;;;;;;;;0DAGvB,6LAAC;gDAAK,WAAU;;oDAA8B;oDAC1C,CAAC,KAAK,KAAK,GAAG,KAAK,QAAQ,EAAE,OAAO,CAAC;;;;;;;;uCAVpC,KAAK,OAAO;;;;;;;;;;;uBAtClB,MAAM,GAAG;;;;;;;;;;;;;;;;AA2D5B;GAnHwB;;QACL,2IAAO;;;KADF","debugId":null}}]
}